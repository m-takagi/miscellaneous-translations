<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ops="http://www.idpf.org/2007/ops" xml:lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <link rel="stylesheet" type="text/css" href="style.css" />
  <meta name="generator" content="Re:VIEW" />
  <title>Where Upstream and Downstream Meet</title>
</head>
<body>
<h1><a id="h"></a>Where Upstream and Downstream Meet</h1>
<p><a href="https://github.com/Open-Advice/Open-Advice/blob/master/packaging/VincentUntz.tex" class="link">The original text</a> (licenced under CC-BY-SA)</p>
<p class="flushright">Vincent Untz</p>
<div class="lead">
<p>Vincent Untzは、活発に活動をしているフリーソフトウェアファンで、GNOMEを愛しており、openSUSEも支援している。彼は2008年から2011年にかけて、GNOME 3.0が公開されるまでの間、GNOMEのリリースマネージャーだった。また、2006年から2010年の間はGNOME Foundationの理事を務め、今はopenSUSEのGNOMEチームを率いている。彼は、端的に言うと「火付け役」である。デスクトップ関連のさまざまな分野で作業を進め、openSUSEが魅力を保ち続けるようにしている。Vincentは今でも、GNOMEの公式言語としてフランス語を推している。そのうちに成功させたいものだ。アイスクリーム好き。</p>
</div>

<h2><a id="h-1"></a>むかしむかしのある夜、ある部屋で……</h2>
<p class="noindent">バグリストを見て、パッチのマージ漏れがないかどうかを確認した。新バージョンに関する説明は、すべて<tt class="inline-code">NEWS</tt>に書き加えたことも確認した。<tt class="inline-code">make distcheck</tt>とタイプしてリリースプロセスを開始して、ターミナルの出力を眺めていた。tarballができあがった。もちろん、きちんとできあがっていることを再確認した。何度も、何度も。心配性だったので、<tt class="inline-code">make distcheck</tt>コマンドの結果を見ただけでは安心できなかった。全体を何度も見直してから、サーバーにtarballをアップロードして、アナウンスメールを送信した。</p>
<p>なんとかそれをやりとげた。あるソフトウェアの共同メンテナになって、はじめてのtarballのリリースだった。「さあ、ユーザーのみなさん。楽しんでくれ！」って感じだった。アップロードが完了して1分もたたないうちに、何人かの人たちがそれをダウンロードしていた。私が作ったリリースが、ユーザーの手に行き渡った瞬間だった。</p>
<p>私はそんなにたいしたことをした感覚はなく、ほんの些細な作業だと思っていた。でもそれは間違いだった。</p>

<h2><a id="h-2"></a>アップストリーム対ダウンストリーム</h2>
<p>ユーザーの立場としては、ソフトウェアを公開するときのいろいろなステップなど知る必要もない。単にそこにあるものを使っていれば、それでいい。</p>
<p>ソフトウェアを公開するまでには、さまざまな人たちがかかわっている。そしてその作業は、大きく二つにわけることができる。いまどきのフリーソフトウェアは、この二つのグループが中心になっているのだ。</p>
<ul>
<li><b>アップストリーム</b>：ソフトウェアを作るグループ。コードを書く人はもちろん、プロジェクトの種類によっては、それ以外のメンバーもこちら側に属することがある。デザイナー・翻訳者・ドキュメント執筆者・テスター・バグの仕分け担当などだ。アップストリームは一般に、ソースコードを圧縮してまとめたtarball形式でリリースするだけだ。</li>
<li><b>ダウンストリーム</b>：ソフトウェアをユーザー向けに配布する役割を受け持つグループ。アップストリームと同様、さまざまな役割のメンバーが属する。翻訳・ドキュメンテーション・テスト・バグの仕分け担当などだ。しかし、ダウンストリームに特有の役割も存在する。それがパッケージャーで、ソフトウェアを、単なるソースコードではなくもっと使いやすい形式にとりまとめる役割を持つ。これがパッケージだ。</li>
</ul>
<p>意識しては以内だろうが、これは、ユーザーにとっても直感的な分類だ。ユーザーにとって、ソフトウェア開発者は手の届かない存在に見える。そこで、フィードバックや問い合わせは、配布担当の人たちに向けて送ることになる。</p>
<p>アップストリームとダウンストリームの区切りをわかりやすくするために、通常の物品に置き換えて考えてみよう。小売店（ダウンストリーム）は、メーカー（アップストリーム）の作った製品を販売する。顧客（ユーザー）にとって重要な役割を果たすのが、小売店だ。</p>

<h2><a id="h-3"></a>ダウンストリームについて</h2>
<p>ダウンストリームの役割を一言でまとめろと言われたら、私ならこう言う。</p>
<blockquote><p>ダウンストリームの役割は、ユーザーとアップストリームとの橋渡しだ。</p></blockquote>
<p>初めてアップストリームでtarballをリリースしたときの私は、「ダウンストリームの作業って、要するにソースをコンパイルしてパッケージを作るだけのことでしょ」と考えていた。確かにパッケージを作るのが第一の作業ではあるが、それは、ダウンストリームの長い旅の第一歩に過ぎない。それ以外にもいくつかのタスクがあって、技術的なものもあれば社会的なものもある。ここでは、それらを簡単に紹介しよう。すべてを網羅しようと思えばこの本をまるごと使ってしまうだろうし、ここではかいつまんだ紹介にとどめる<a href="#fn-fn01" class="noteref">*1</a>。</p>
<div class="footnote"><p class="footnote">[<a id="fn-fn01">*1</a>] 私は、アップストリームがリリースしたソフトウェアに対してダウンストリームで大幅に手を加えるのはよくないと考えている。しかし中にはそうしているところもあるし、それもまた彼らの作業のひとつになっている。</p></div>
<p>パッケージのビルドは、思っているほど些細なことではない。アップストリームが見つけられなかった問題をパッケージャーが発見することは珍しくない。たとえば、新しいバージョンのコンパイラを使って新たなエラーに遭遇したりすることがある。あるいは、事前に別のライブラリを更新しておく必要があるなどという場合もある（そのtarballが、何らかの新たなAPIを使っている場合など）また、tarballのビルドシステムが強いる作業手順が、パッケージング対象のディストリビューションのガイドラインに沿っていないこともある。より見落とされがちなのが、こういった問題は、tarballをパッケージにした後にも発生しうるということだ。たとえば、ディストリビューション全体で、新しいコンパイラやツール群への移行が決まったときなどが、その一例だ。これらの技術的な課題は、決していかんともしがたい難問だというわけではない。アップストリーム側で解決してしまえることも多い。しかし、ダウンストリームからの指摘がなければ、そういった課題がアップストリームに認知されるまでには時間がかかる。</p>
<p>個人的に、こういった技術的な課題よりもずっと大切だと感じていることがある。それは、ダウンストリームのほうが、アップストリームよりも、直接ユーザーとかかわることが多いということだ。つまり、バグ報告やサポート依頼、デフォルト値の変更の要望などを、直接ユーザーから受けることになる。これこそがダウンストリームの見せ場だ。それらを単にアップストリームに投げるのではなく、ユーザーからのフィードバックをきちんととりまとめて、アップストリームで活用しやすいようにまとめてから、アップストリームに依頼する。ほとんど情報がないバグ報告が来ることも多い（そんな場合は、ダウンストリームがユーザーに詳細を確認する）。ユーザーの誤解にもとづくサポート依頼が来ることも多い（そんな場合は、その誤解を解消するように、うまい返事を返すこともある）。十分な説明のないまま、設定のデフォルト値が変わってしまうことも多い（そんな場合は、ダウンストリームがユーザーに、その意図を説明することになる）。こういった数々のフィードバックの中から、アップストリーム側で役立てられるであろうものだけをピックアップして送る。これが、そのソフトウェアの改善につながる。</p>
<p>一般に、ダウンストリームの貢献者が得る報酬はふたつある。ダウンストリームでの作業によるアップストリームのプロジェクトへの直接・間接の貢献だけでも十分だが、さらに、多くのユーザーとの直接のやりとりが、ユーザーの満足にもつながっている。そして、そういったユーザーとの接触は、多くの人たちを喜ばせる。</p>
<p>余談だが、ダウンストリーム側での作業の量を考えれば、ダウンストリームの人たちがアップストリームの貢献者たちのバッファとなっていることについて、アップストリームから感謝の一言があっても不思議じゃないと思う。アップストリームが対応すべきフィードバックの量を大幅に減らしてくれているだけではなく、フィードバックの質の向上にも貢献している（ダブりを排除したり、詳細な情報が提供されていないものをフォローしたりしている）わけだから。そのおかげで、アップストリームは本来の開発に注力できるようになり、フィードバックのトリアージを気にせずに済んでいる。</p>
<p>私自身のアップストリームでの経験を振り返ると、ビルドに関する問題のパッチを、ダウンストリームから数え切れないほど受け取ったものだ。ユーザーに影響の及ぶバグについても、数々の議論を重ねた。それが、優先順位付けの助けになった。その後、ダウンストリームの立場になったときに、私も同様に、ビルド関連のパッチをアップストリームに送るようにした。また、ユーザーからのフィードバックも伝えるようにした。アップストリームとダウンストリームが手を取り合うことで、フリーソフトウェア業界全体の質を向上させる手助けになるだろう。私たち自身のためにも、それはいいことだと思う。</p>

<h2><a id="h-4"></a>ダウンストリームの成果をアップストリームへ！</h2>
<p>プロジェクトを成功に導くには、アップストリームとダウンストリームの協力が不可欠だと思っている。これについては、異論のある人も多いだろう。しかし、「ダウンストリーム」と聞くと、ディストリビューション側での作業を想像する人が多い。しかし、特にアプリケーションなどでは、ダウンストリームの作業をディストリビューションだけにとどめず、そお成果をアップストリームにも届けることが必須になりつつある。</p>
<p>Tools like the Open Build Service make it easy to have people build and distribute packages of an application for several distributions. This has benefits for both the users (who can more easily and more quickly enjoy updates of their favorite applications) and for upstream (who can help build a stronger relationship with its user base). The only challenge with such a move is that there still needs to be someone doing the packaging work, but also to manage the larger feedback from users. That is, there still needs to be someone doing the downstream work; except that it would be done as part of upstream.</p>
<p>To me, this sounds like an exciting perspective, and I would even go as far as suggesting that we, the Free Software community, should slowly migrate the downstream work being done in distributions to be based on downstream work being done directly upstream whenever possible -- and at least for applications, this is often possible. This obviously requires a mind shift, but it would allow more sharing of the efforts that are most of the time being duplicated in all the different downstreams as of today.</p>
<p>For people willing to start contributing nowadays to applications they like, this packaging work upstream is a whole new approach that could be really successful!</p>

<h2><a id="h-5"></a>I tried it and I stayed, will you?</h2>
<p>Downstream has always been essential to my life as a Free Software user -- after all, only a few people are manually building their whole system from scratch and I am not one of them. But it also became an asset to me as an upstream developer, as I started taking more time to discuss with downstream people to get more feedback on bugs, features, general quality and even future directions of the software I was working on.</p>
<p>This is only when I started being a downstream myself that I understood that this position is indeed a privileged one to help advise upstream, because of the direct contact to users and because of the different perspective we get from this different position.</p>
<p>Without downstream, we would not be where we are today. If you want to make a difference, be sure that by joining a downstream effort and talking to upstream, you will succeed.</p>
<p>And you will have fun.</p>
</body>
</html>
