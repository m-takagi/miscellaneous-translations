<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ops="http://www.idpf.org/2007/ops" xml:lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <link rel="stylesheet" type="text/css" href="style.css" />
  <meta name="generator" content="ReVIEW" />
  <title>技術的負債の象限</title>
</head>
<body>
<h1><a id="h"></a>技術的負債の象限</h1>
<div class="lead">
<p>Martin Fowler's blikiの&quot;<a href="http://martinfowler.com/bliki/TechnicalDebtQuadrant.html" class="link">TechnicalDebtQuadrant</a>&quot;の翻訳。</p>
</div>
<p>2009/10/14</p>
<p class="flushright">tags: <a href="http://martinfowler.com/tags/technical%20debt.html" class="link">technical debt</a></p>
<p>ここ数ヶ月の間に、<a href="http://martinfowler.com/bliki/TechnicalDebt.html" class="link">TechnicalDebt</a>に関する投稿がいくつかあった。設計上の不備の中で、技術的負債と呼ぶべきものは何か？逆に、そう呼ぶべきでないものは何か？といった疑問が挙げられていた。</p>
<p>その一例が、アンクル・ボブの投稿「<a href="http://blog.objectmentor.com/articles/2009/09/22/a-mess-is-not-a-technical-debt" class="link">汚いコードが負債というわけじゃない(a mess is not a debt)</a>」だ。彼が言うには、良い設計方法を知らない人が書いた単に汚いだけのコードを負債と呼ぶべきではない。技術的負債という言葉はもっと特別な場合を指すものだ。検討の末に、長期的な持続性のない(けれども短期的には利益を生み出す。たとえばすぐにリリースできるなどの)設計指針を敢えて選択するといった場合に使う。要するに、負債を抱えれば早めに価値を生み出せるけれども、いずれ返済しないといけなくなるってことだ。</p>
<p>私に言わせると、設計の不備が負債かそうじゃないかなんて考えることがそもそも間違ってる。技術的負債っていうのは単なるたとえ話なんだから、ここで問うべきなのは「これを負債にたとえた場合に、設計上の問題を考える助けになるだろうか？そして他人と意見交換しやすくなるだろうか？」だ。このたとえ話を使う大きなメリットは、技術者以外にも話が通じやすくなることだ。</p>
<p>私見だが、設計上の不備も検討の末の判断も、どちらも負債のたとえがうまく当てはまると思う。ただ、負債の性質が違うというだけのことだ。きたないコードは無鉄砲な(reckless)負債だ。結果として利息の支払いが不能になったり、いくら払っても元金が減らなかったりすることになる。私たちのプロジェクトの中にも、コードベースが負債まみれになっているものがいくつかある。その対策についてクライアントの担当者と話し合うときに、このたとえはとても便利だ。</p>
<p>負債のたとえを聞いて思い出すのが、設計上の不備に対してとれる選択肢のことだ。用心深く考えた結果として負債を抱えたリリースをした場合、支払う利息が無視できるほど小さいのならその返済をしなくてもかまわないだろう。たとえば、めったに使われることのない部分などがこれにあたる。</p>
<p>つまり、負債かそうじゃないかっていう区別はあまり意味がなくて、考えた上での負債なのか考えが足りない負債なのかのほうが大事だ。</p>
<p>いまあげた例について、もうひとつ別の切り口で区別することもできる。無鉄砲な負債か用心深い負債化という違いのほかに、意図的な負債なのか無意識のうちの負債なのかという区別があるのだ。用心深い負債の例は、この区別では意図的な負債にあたる。チームはそれが負債であることを認識しており、早めにリリースすることで十分元が取れるという判断をしたわけだ。設計について無関心なチームは、無意識のうちに負債を抱えてしまうことがある。いったいどれだけのものを質入れしているのかを認識することもない。</p>
<p>無鉄砲な負債は必ずしも無意識なものばかりというわけではない。設計の重要性をきちんと理解していて実践できるチームでも、あえて「間に合わせの適当な」設計を選ぶこともある。クリーンなコードを書くだけの余裕がないと判断した場合などだ。こんな場合はほとんど無鉄砲な負債になるっていうことについては、私もアンクル・ボブに同意する。人はみな、<a href="http://martinfowler.com/bliki/DesignPayoffLine.html" class="link">DesignPayoffLine</a>を過小評価するものだからだ。よい設計とクリーンなコードの本質は、開発をすばやく進められるようにすることだ。そうでもなければ、アンクル・ボブやケント・ベックそしてウォード・カニンガムといった面々がわざわざ時間をかけて議論することもないだろう。</p>
<p>「無鉄砲／用心深い」と「意図的な／無意識な」の二つの基準を使うと、負債を象限に分類できることになる。ここまでで議論したのは、その中の三つの部分だ。残りの一つ、つまり「用心深く、かつ無意識な」負債については何が言えるだろう？ちょっと奇妙な感じもするが、私はこれもアリだと思う。負筒にあり得る話だっていうだけじゃなく、よくできる設計者が集ったチームでは避けられない事態だ。</p>
<p>私の同僚が最近リリースしたプロジェクトのことについて、彼と話をした。彼が言うには、そのプロジェクトは価値のあるソフトウェアを提供できたし、顧客も喜んでくれたし、そしてコードもクリーンだった。でも、なぜか彼はそのコードに満足していなかった。自分のチームがいい仕事をしてくれたというのはわかっている。でも、今になって「あそこはああしておくべきだった」というのがわかってきたというのだ。</p>
<p>デキる開発者たちは、いつもこんなことを言っている。要するに、プログラミングをしているときには、同時に学んでもいるということだ。何かのプロジェクトに参加して1年ほどプログラミングをし続けて、ようやくその課題に対する最善のアプローチを理解したりするってことも珍しくない。おそらく、最初からそれを見越した計画を立てるべきなんだろう。最初の1年で組み立てたシステムをいったん破棄して最初から作り直すということだ。かつてフレッド・ブルックスもそんな提案をしていた。でも、なかなかそんなことも言っていられない。本来そうすべきだった設計を発見した時点で、あなたは無意識な負債を抱えたことを自覚することになる。これはある意味、ウォードが<a href="http://www.c2.com/cgi/wiki?ComplexityAsDebt" class="link">ビデオ</a>で話している負債みたいなものだ。</p>
<p>The decision of paying the interest versus paying down the principal still applies, so the metaphor is still helpful for this case. However a problem with using the debt metaphor for this is that I can't conceive of a parallel with taking on a prudent-inadvertent financial debt. As a result I would think it would be difficult to explain to managers why this debt appeared. My view is this kind of debt is inevitable and thus should be expected. Even the best teams will have debt to deal with as a project goes on - even more reason not to recklessly overload it with crummy code.</p>
<div class="image">
<img src="images/techDebtQuadrant.png" alt="" />
</div>
<ul>
<li>Reckless(無鉄砲な) / Prudent(用心深い)</li>
<li>Deliberate(意図的な) / Inadvertent(無意識な)</li>
</ul>
<ul>
<li>reckless-deliberate 「設計する時間がないんだからしょうがない」</li>
<li>prudent-deliberate 「今すぐリリースしないといけない。リスクは承知の上だ」</li>
<li>reckless-inadvertent 「レイヤー化？なにそれ？」</li>
<li>prudent-inadvertent 「よし、これでオッケー！」</li>
</ul>
</body>
</html>
